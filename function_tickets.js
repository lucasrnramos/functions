// let = obj = {
// 	"status": true,
// 	"data": {
// 		"BENEFICIARIO": {
// 			"cod_beneficiario": 225429,
// 			"dv_beneficiario": "8",
// 			"nome_beneficiario": "DANIEL DE MACEDO VERAS",
// 			"iniciais_beneficiario": "DMV",
// 			"sexo": "M",
// 			"data_nascimento": "1965-07-15 00:00:00",
// 			"estado_civil": "C",
// 			"rg": "479082",
// 			"cpf": "47747838468",
// 			"versao": "23",
// 			"rg_2": "200432178297",
// 			"cod_beneficiario_atual": null,
// 			"nome_completo": "DANIEL DE MACEDO VERAS",
// 			"nome_mae": "MARLUCE DE MACEDO VERAS",
// 			"peso": null,
// 			"altura": null,
// 			"status_cpf": "N",
// 			"cod_uf_rg": "AL",
// 			"pais_emissor_rg": "76",
// 			"org_expedidor_rg": "SSP",
// 			"cod_uf_rg2": null,
// 			"pais_emissor_rg2": null,
// 			"org_expedidor_rg2": null,
// 			"reside_brasil": "0",
// 			"pis_pasep": "0",
// 			"nascido_vivo": null,
// 			"carteira_sus": "700003721574200",
// 			"recem_nascido": null,
// 			"recem_casado": null,
// 			"recem_admitido": null,
// 			"data_emissao_rg2": null,
// 			"data_emissao_rg": null,
// 			"uf_cidade_nascimento": null,
// 			"cod_cidade_nascimento": null,
// 			"id_estrangeiro": "S",
// 			"renda_mensal": null,
// 			"data_obito": null,
// 			"genero": "M",
// 			"nome_social": null,
// 			"nome_social_abrev": null,
// 			"iniciais_nome_social": null,
// 			"data_insercao_reg": null,
// 			"usuario_insercao_reg": null,
// 			"data_formatada": "15\/07\/1965",
// 			"idade_benef": "56 anos"
// 		},
// 		"CARTEIRA": {
// 			"unimed_carteira": "65",
// 			"cod_carteira": "1000558927",
// 			"dv_carteira": "6",
// 			"cod_motivo_bloqueio": "0",
// 			"cod_beneficiario": 225429,
// 			"cod_unimed": "65",
// 			"cod_empresa": "888",
// 			"cod_familia": "225429",
// 			"cod_contrato": "888",
// 			"data_emissao": "2021-08-23 07:57:40",
// 			"validade": "2023-08-31 23:59:59",
// 			"data_bloqueio": null,
// 			"versao": "0",
// 			"responsavel": null
// 		 },
// 		"BOLETOS": [
// 			{
// 				"tituloid": "1003287850",
// 				"cod_unimed": "65",
// 				"cod_empresa": "888",
// 				"cod_familia": "225429",
// 				"cod_contrato": "888",
// 				"cod_beneficiario": "225429",
// 				"dtvencimento": "10\/06\/2022",
// 				"mesvencimento": "06",
// 				"anovencimento": "2022",
// 				"dtvencimentoatualizado": null,
// 				"diasatraso": "-8",
// 				"statusid": "2",
// 				"situacao_carnet": "0",
// 				"status": "ABERTO",
// 				"valor": "4712.7",
// 				"valorformatado": "4,712.70",
// 				"linhadigitavel": null,
// 				"cedente": null,
// 				"urlboleto": null,
// 				"descricao": "DANIEL DE MACEDO VERAS",
// 				"quantidade": "3",
// 				"valorformatadodet": "R$ 942.54",
// 				"enviado": "NÃO ENVIADO",
// 				"url": "https:\/\/www.unimedmaceio.com.br\/novosite\/templates\/areasrestritas\/clientes\/boleto\/boleto.php?token=d33c3557791364d95a3377c6975673ed&carnet=1003287850&carteira=1000558927&p=s&type=enc"
// 			},
//             {
// 				"tituloid": "1003287850",
// 				"cod_unimed": "65",
// 				"cod_empresa": "888",
// 				"cod_familia": "225429",
// 				"cod_contrato": "888",
// 				"cod_beneficiario": "225429",
// 				"dtvencimento": "10\/06\/2022",
// 				"mesvencimento": "07",
// 				"anovencimento": "2022",
// 				"dtvencimentoatualizado": null,
// 				"diasatraso": "-8",
// 				"statusid": "2",
// 				"situacao_carnet": "0",
// 				"status": "ABERTO",
// 				"valor": "4712.7",
// 				"valorformatado": "4,712.70",
// 				"linhadigitavel": null,
// 				"cedente": null,
// 				"urlboleto": null,
// 				"descricao": "DANIEL DE MACEDO VERAS",
// 				"quantidade": "3",
// 				"valorformatadodet": "R$ 942.54",
// 				"enviado": "NÃO ENVIADO",
// 				"url": "https:\/\/www.unimedmaceio.com.br\/novosite\/templates\/areasrestritas\/clientes\/boleto\/boleto.php?token=d33c3557791364d95a3377c6975673ed&carnet=1003287850&carteira=1000558927&p=s&type=enc"
// 			},
// 			{
// 				"tituloid": "1003287850",
// 				"cod_unimed": "65",
// 				"cod_empresa": "888",
// 				"cod_familia": "225429",
// 				"cod_contrato": "888",
// 				"cod_beneficiario": "225429",
// 				"dtvencimento": "10\/06\/2022",
// 				"mesvencimento": "07",
// 				"anovencimento": "2022",
// 				"dtvencimentoatualizado": null,
// 				"diasatraso": "-8",
// 				"statusid": "2",
// 				"situacao_carnet": "0",
// 				"status": "ABERTO",
// 				"valor": "4712.7",
// 				"valorformatado": "4,712.70",
// 				"linhadigitavel": null,
// 				"cedente": null,
// 				"urlboleto": null,
// 				"descricao": "DANIEL DE MACEDO VERAS",
// 				"quantidade": "3",
// 				"valorformatadodet": "R$ 942.54",
// 				"enviado": "NÃO ENVIADO",
// 				"url": "https:\/\/www.unimedmaceio.com.br\/novosite\/templates\/areasrestritas\/clientes\/boleto\/boleto.php?token=d33c3557791364d95a3377c6975673ed&carnet=1003287850&carteira=1000558927&p=s&type=enc"
// 			}
// 		],
// 		"BENEFICIARIO_PAC": {
// 			"cod_beneficiario": "225429",
// 			"pac_reg": "191965",
// 			"carteira": "1000361925",
// 			"dv_carteira": "9"
// 		}
// 	},
// 	"payload": null
// }






// function verificarObj(obj){
// 	let input = Object.keys(obj.data).length;
	

// 	return input;
// };

// console.log(verificarObj(obj));



//console.log(teste('quero meus '));

//console.log(verificarObj(obj));

//console.log(typeof obj);

// function tickets(obj) {
//     let objElement = obj.data.BOLETOS.map(function (object) {
//         return object.url;
//     });
// 	 //let qtdTicket = objElement.findIndex(element => element !== null);
    
//      return objElement;
// };

//   console.log(tickets(obj));









// function clientHolder(obj) {
//     let objElement = obj.data.BOLETOS.map(function (object) {
//         return object.cod_beneficiario;
//     });
//      let qtdTicket = objElement.findIndex(element => element !== null);
     
//      return qtdTicket;
// };

// console.log(clientHolder(obj));

//Função que trás o código benef, criar lógica para saber se o código do benef da sessão é o mesmo do obj BOLETOS, ou seja, ver se é o titular.
// function positionElemnt(obj, pos) {
//     let objTransform = obj;
//     let position = objTransform.data.BOLETOS[pos].cod_beneficiario;

//     return position;
// };

// console.log(positionElemnt(obj, 0));

//47747838468

let obj = {
		"BENEFICIARIO": {
			"cod_beneficiario": 226844,
			"dv_beneficiario": "2",
			"nome_beneficiario": "ARTHUR DE OLIVEIRA VERAS",
			"iniciais_beneficiario": "AOV",
			"sexo": "M",
			"data_nascimento": "1995-11-15 00:00:00",
			"estado_civil": "S",
			"rg": "34113878",
			"cpf": "9049668445",
			"versao": "25",
			"rg_2": "341113878",
			"cod_beneficiario_atual": null,
			"nome_completo": "ARTHUR DE OLIVEIRA VERAS",
			"nome_mae": "MAYSA MARQUES DE OLIVEIRA VERAS",
			"peso": null,
			"altura": null,
			"status_cpf": "N",
			"cod_uf_rg": "AL",
			"pais_emissor_rg": "76",
			"org_expedidor_rg": "SSP",
			"cod_uf_rg2": null,
			"pais_emissor_rg2": null,
			"org_expedidor_rg2": null,
			"reside_brasil": "0",
			"pis_pasep": "0",
			"nascido_vivo": null,
			"carteira_sus": "700607474818360",
			"recem_nascido": null,
			"recem_casado": null,
			"recem_admitido": null,
			"data_emissao_rg2": null,
			"data_emissao_rg": null,
			"uf_cidade_nascimento": null,
			"cod_cidade_nascimento": null,
			"id_estrangeiro": "S",
			"renda_mensal": null,
			"data_obito": null,
			"genero": "M",
			"nome_social": null,
			"nome_social_abrev": null,
			"iniciais_nome_social": null,
			"data_insercao_reg": null,
			"usuario_insercao_reg": null,
			"data_formatada": "15\/11\/1995",
			"idade_benef": "26 anos"
		},
		"CARTEIRA": {
			"unimed_carteira": "65",
			"cod_carteira": "1000558926",
			"dv_carteira": "8",
			"cod_motivo_bloqueio": "0",
			"cod_beneficiario": 226844,
			"cod_unimed": "65",
			"cod_empresa": "888",
			"cod_familia": "225429",
			"cod_contrato": "888",
			"data_emissao": "2021-08-23 07:57:40",
			"validade": "2023-08-31 23:59:59",
			"data_bloqueio": null,
			"versao": "0",
			"responsavel": null
		},
		"BOLETOS": [
			{
				"tituloid": "1003369259",
				"cod_unimed": "65",
				"cod_empresa": "888",
				"cod_familia": "225429",
				"cod_contrato": "888",
				"cod_beneficiario": "226844",
				"dtvencimento": "10\/08\/2022",
				"mesvencimento": "08",
				"anovencimento": "2022",
				"dtvencimentoatualizado": null,
				"diasatraso": "-28",
				"statusid": "2",
				"situacao_carnet": "0",
				"status": "ABERTO",
				"valor": "5165.5",
				"valorformatado": "5,165.50",
				"linhadigitavel": null,
				"cedente": null,
				"urlboleto": null,
				"descricao": "ARTHUR DE OLIVEIRA VERAS",
				"quantidade": "3",
				"valorformatadodet": "R$ 1,033.10",
				"enviado": "NÃO ENVIADO",
				"url": "https:\/\/www.unimedmaceio.com.br\/novosite\/templates\/areasrestritas\/clientes\/boleto\/boleto.php?token=110df9d2e972aacdd264888ce92cb3a0&carnet=1003369259&carteira=1000558926&p=s&type=enc"
			},
			{
				"tituloid": "1003369259",
				"cod_unimed": "65",
				"cod_empresa": "888",
				"cod_familia": "225429",
				"cod_contrato": "888",
				"cod_beneficiario": "226844",
				"dtvencimento": "10\/08\/2022",
				"mesvencimento": "09",
				"anovencimento": "2022",
				"dtvencimentoatualizado": null,
				"diasatraso": "-28",
				"statusid": "2",
				"situacao_carnet": "0",
				"status": "ABERTO",
				"valor": "5165.5",
				"valorformatado": "5,165.50",
				"linhadigitavel": null,
				"cedente": null,
				"urlboleto": null,
				"descricao": "ARTHUR DE OLIVEIRA VERAS",
				"quantidade": "3",
				"valorformatadodet": "R$ 1,033.10",
				"enviado": "NÃO ENVIADO",
				"url": "https:\/\/www.unimedmaceio.com.br\/novosite\/templates\/areasrestritas\/clientes\/boleto\/boleto.php?token=110df9d2e972aacdd264888ce92cb3a0&carnet=1003369259&carteira=1000558926&p=s&type=enc"
			}
		],
		"BENEFICIARIO_PAC": {
			"cod_beneficiario": "226844",
			"pac_reg": "577790",
			"carteira": "1000361923",
			"dv_carteira": "2"
		},
}


//Função verifica se o Objeto 'BOLETOS' existe
function runses(obj){

	if(obj.hasOwnProperty('BOLETOS')){
		return true;
	}else{
		return false;
	}
};

//console.log(run(obj));


//Função retorna a quantidade de Objetos dentro do Array 'BOLETOS'
function verificarObj(obj){
	let input = Object.keys(obj.BOLETOS).length;
	
	return input;
};

//console.log(verificarObj(obj));


//Função que retorna o índice do primeiro objeto
function numberOfTickets(obj) {
    const content = obj.data.BOLETOS.map(function (object) {
        return object.url;
    });
    const positionTicket = content.findIndex(element => element != null);
    if (positionTicket == -1) {
        return null;
    }
    return positionTicket;
};

//console.log(numberOfTickets(obj));


//Função que retorna o Mês e Ano de vencimento do Boleto apresentado no fluxo
function extractTickets(obj) {
	let content = JSON.parse(obj);
    let month = content.BOLETOS.map(function (result) {
        return result.mesvencimento;
    });
	let year = content.BOLETOS.map(function (result) {
        return result.anovencimento;
    });

    return month[0] + '/' + year[0];
};
//console.log(extractTickets(obj));


//Função que acessa o valor da chave URL do objeto de posicao retornado na função acima.
function runs(obj) {
	let content = JSON.parse(obj);
    let ticket = obj.BOLETOS.map(function (object) {
        return object.url;
    });

    return ticket[0];
};

//console.log(extractTickets(obj))




function positionAgent(obj, pos) {
    let position = obj.resource.items[pos].status;

    return position;
}

function running(input){
	let card = input.toLowerCase();
	let regex = /\d/g;

	if(card == 'menu'){
		return 'menu';
	}else if(card == 'sair' || card == 'retornar' || card == 'voltar' || card == 'encerrar'){
		return 'exit';
	}else if(isNaN(card) == true && card.length > 17 && card.includes('.', '-')){
		let transformCard = card.match(regex);
		let notArray = transformCard.join('');
		return notArray;
	} else if(isNaN(card) == false && card.length == 17){
		return card;
	}else if(isNaN(card) == false && card.length != 17){
		return false;
	} else if(isNaN(card) == true){
		return false;
	}
};

//console.log(running('0065oio001000.7894-45'));

//Função para remover caracteres não numéricos.
function remove(response){
    let regex = /\d/g;
	let transform = response.match(regex)

    return transform.join('');
};

function teste1(response){
    let input = response.toLowerCase();
    let regex = /\d/g;
	let transform = response.match(regex);

    if(input.includes('sair') || input.includes('encerrar') || input.includes('cancelar')){
        return 'exit';
    }else if(input.includes('voltar') || input.includes('retorna')){
        return 'return';
    }else if(input.includes('menu')){
        return 'redirect';
    }else if(isNaN(transform) == true){
        return transform.join('');
    }else{
        return 'error';
    }
};

//console.log(teste1('065.656.565oi'))

function runned(name){
    let input = name.toUpperCase();

    if(isNaN(input) == true){
        return input;
    } else{
        return 'error';
    }
};

//console.log(runned('651651651'));

function meansOfContact(meansContact){
	let input = meansContact.toLowerCase();
	
	if(input.includes('whats') || input.includes('zap')){
		return 'whatsapp';
	} else if(input.includes('mail')){
		return 'email';
	} else if(input.includes('ambos')){
		return 'ambos';
	} else{
		return 'error';
	}
};

//console.log(meansOfContact('HOTMAIL'));


function rune(obj){
    let input = obj.data;

    if(input.includes('reembolso')){
        return 'refund';
    } else if(input.includes('fatura') || input.includes('boleto')){
        return 'ticket';
    } else if(input.includes('cartão') || input.includes('cartao')){
        return 'card';
    } else if(input.includes('autorização') || input.includes('autorizações') || input.includes('autorizacao') || input.includes('autorizacoes') || input.includes('autorizar')){
        return 'autorization';
    } else if(input == 'planos'){
        return 'plans';
    } else if(input.includes('telefones')){
        return 'phone';
    } else if(input.includes('documentos')){
        return 'document';
    } else if(input.includes('processo')){
        return 'process';
    } else if(input.includes('mudança') || input.includes('mudar')){
        return 'alterPlan';
    } else if(input.includes('atendimento') || input.includes('atendente')){
        return 'attendant';
    } else if(input.includes('menu')){
        return 'menu';
    } else if(input.includes('sair') || input.includes('encerrar')){
        return 'exit';
    } else if(input.includes('retornar') || input.includes('voltar')){
        return 'return';
    } else{
        return 'error';
    }
};

//console.log(obj.data.includes('BENEFICIARIO'));


//console.log('5tr1ng0'.replace(/([^\d])+/gim, ''));





//Função que extrai os números de uma string
function extractNumbersAge(idade){
	
	return idade.replace(/([^\d])+/gim, '')
};

//console.log(extractNumbersAge('77 anos'));


function ageForConsultation(age){

	if(age <= 15){
		return true;
	}else{
		return false;
	}
};

//console.log(ageForConsultation(12));


//Função que trata o CNPJ
function tratmentCnpj(cnpj){
	if (isNaN(cnpj) == false){
  		let format = cnpj.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, "$1.$2.$3/$4-$5");
		console.log('Ponto 1')
	  return format
	} 
	else if(isNaN(cnpj) == true && cnpj.length == 18){
		let convert = cnpj.replace(/([^\d])+/gim, ''); //Retira os caracteres não numéricos.

		function format(){ 
			if(convert.length == 14){ //Verifica se possui a quantidade de 14 números.
			let format = cnpj.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, "$1.$2.$3/$4-$5"); //Formata
			console.log('Ponto 2')
			return format;
			}else{
				return 'error1';
			}
		}

		return format();
	}else if (cnpj.includes('sair') || cnpj.includes('voltar') || cnpj.includes('menu')){
	  return 'redirect'
	} else {
	  return 'error'
	}
  };

//console.log(tratmentCnpj('eu quero voltar ao menu'));

//12.442.737/0001-43
//12.442.737/0001-43



function run(identity, date) {

	let createObject = {
                       "id": identity,
                       "date": date,
					   "arrayNotes": []
						};

	return createObject;
}; //Vai no bloco de número de nota fiscal



function run2(arr2){
	
	arrayVolumes = [arr2]

	return arrayVolumes;
}; //Vai no bloco de volumes


//{ arrayNotes: [] }  { arrayVolumes: [] }
function run3(Run1, Run2){
	let descricao = JSON.parse(Run1);
	let transform = JSON.parse(Run2).join('');
	let resultArray = descricao;
	resultArray.push(transform);
	return resultArray;
}; //Faz o relacionamento do número da nota com o volume

//console.log(run3(run1(654321), run2(02)));
//console.log(run3(run1(123456), run2(01)));


function run4(response){
    let input = response.toLowerCase();
    let regex = /\d/g;
	let transform = response.match(regex);

    if(input.includes('sair') || input.includes('encerrar') || input.includes('cancelar')){
        return 'exit';
    }else if(input.includes('voltar') || input.includes('retorna')){
        return 'return';
    }else if(input.includes('menu')){
        return 'redirect';
    }else if(isNaN(transform) == true){
        return transform.join('');
    }else{
        return 'error';
    }
};

//console.log(run4(4));

function run5() {

	let arrayNotes = []

	return arrayNotes;
};


function run6(response){
	variable = response;
		function str(variable){
			if(isNaN(variable) == true){
				
				input = variable.toLowerCase();
				console.log(input)
				return input;
			}else{
				console.log(variable);
				return variable;
			}
		};
    let regex = /\d/g;
	let transform = variable.match(regex);

    if(input.includes('sair') || input.includes('encerrar') || input.includes('cancelar')){
        return 'exit';
    }else if(input.includes('voltar') || input.includes('retorna')){
        return 'return';
    }else if(input.includes('menu')){
        return 'redirect';
    }else if(isNaN(transform) == false){
        return transform.join('');
    }else{
        return 'error';
    }
};


//console.log(run6('oi'));

function run7(response){

	let input1 = response.replace('.', '');
	let input2 = input1.replace('-', '');
	let input3 = input2.replace(' ', '');
	if(isNaN(input3) == true && input3.toLowerCase().includes('sair') || input3.toLowerCase().includes('encerrar')){
		
		return 'exit';

	}else if(isNaN(input3) == true && input3.toLowerCase().includes('menu')){
		
		return 'redirect';

	}else if(isNaN(input3) == true && input3.toLowerCase().includes('voltar') || input3.toLowerCase().includes('retornar')){

		return 'return';

	}else if(isNaN(input3) == false){

		return input3;

	}else{

		return 'error';

	}
};

//console.log(run7('3552 5262-7.4 quero voltar'))

let objeto1 = {"arrayNotes":["6546513","65121356","123456"]};

let objeto2 = {"arrayVolumes":["2","1","8"]};




function run8(entrada1, entrada2){
	let arr1 = entrada1.arrayNotes;
	let arr2 = entrada2.arrayVolumes;

	let obj = {itens: [
						{arr1}, 
					    {arr2}
					  ]};

	let result = obj.itens.map(function(elemento, index){
		return (`${index + 1}. ${elemento.arr1} ${elemento.arr2}`)
		});
	
	/*let result2 = entrada2.arrayVolumes.map(function(elemento, index){
		return (`${index + 1}. ${elemento.replace(',', ' ')}\n`)
		});
	result1 = result1.join('');*/
	result = result.join('');
	return result;
}

//console.log(run8(objeto1, objeto2));




//console.log(run9(object1, object2));








//Função que trata os agendamentos futuros

let obj1 = {
	arrayData: [
	  {
		nome: 'Maria do Carmo',
		date: '28/07/2022',
		especialidade: 'Cardiologia'
	  },
	  {
		nome: 'José Felipe Silva',
		date: '06/08/2022',
		especialidade: 'Pediatria'
	  },
	  {
		nome: 'Carlos de souza',
		date: '15/11/2022',
		especialidade: 'Nutrologia'
	  }
	]
  };
  
  let lengthObj1 = obj1;
  lengthObj1 = lengthObj1.arrayData.length;
  
  function consul() {
  
	let arr = [];
	let newObj = [];
	let dataAtual = new Date();
  
	for (i = 0; i < lengthObj1; i++) {
  
	   dataConvert1 = obj1.arrayData[i].date;
	   dataConvert2 = dataAtual.toLocaleDateString("pt-BR");
	  
		  if (dataConvert1.split("/").reverse().join('/') >= dataConvert2.split("/").reverse().join('/')) {
		  let consulta = obj1.arrayData[i];
		  arr.push(consulta);
		  }
	}
  
	let finish = arr.map(function(item, index) {
	  return (`${index + 1}. Consulta com ${item.nome} - ${item.especialidade} no dia: ${item.date}\n`);
	})
  
	finish = finish.join('');
  
	 return finish;
  }
  
  console.log(consul());
  


